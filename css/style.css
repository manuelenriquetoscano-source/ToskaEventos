/* =============================================================================
   1) VARIABLES / RESET / UTILIDADES
   ========================================================================== */
:root{
  --bg:#f7f9fb; --card:#ffffff; --ink:#0f172a; --muted:#6b7280;
  --brand:#2563eb; --brand-2:#22c55e; --busy:#ef4444; --pending:#f59e0b;
  --ring:rgba(37,99,235,.35); --shadow:0 10px 25px rgba(0,0,0,.06);
  --radius:16px; --radius-sm:12px;
}
*{box-sizing:border-box}
html,body{margin:0}
body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;color:var(--ink);background:var(--bg);line-height:1.5}
.container{max-width:1100px;margin:auto;padding:24px}
.row{display:flex;gap:12px}
.row.between{justify-content:space-between}
.row.center{align-items:center}
.row.wrap{flex-wrap:wrap}
.gap{gap:12px}
.grid{display:grid;gap:16px}
.section{padding:32px 24px}
.muted{color:var(--muted);font-size:.9rem}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
.hidden{display:none !important}

/* =============================================================================
   2) BOTONES
   ========================================================================== */
.btn{
  background:var(--brand);color:#fff;border:0;padding:12px 16px;border-radius:999px;
  cursor:pointer;box-shadow:var(--shadow);transition:transform .15s,filter .15s
}
.btn:hover{transform:translateY(-1px)}
.btn:focus{outline:2px solid var(--ring);outline-offset:2px}
.btn--ghost{background:transparent;color:var(--ink);border:1px solid #e5e7eb}

/* Botón HOY visual */
.btn--today{
  display:inline-flex;align-items:center;gap:10px;
  background:linear-gradient(180deg,#ffffff,#f8fafc);
  color:var(--ink);border:1px solid #e5e7eb;border-radius:999px;padding:10px 16px;
  box-shadow:0 6px 18px rgba(15,23,42,.06), inset 0 1px 0 #fff;
  transition:transform .15s, box-shadow .15s, border-color .15s;
}
.btn--today:hover{
  transform:translateY(-1px);
  box-shadow:0 10px 26px rgba(15,23,42,.10), inset 0 1px 0 #fff;
  border-color:#d1d5db;
}
.btn--today:active{transform:translateY(0)}
.btn__icon{width:18px;height:18px;flex:0 0 18px;opacity:.9}

/* =============================================================================
   3) TOPBAR / NAV
   ========================================================================== */
.topbar{position:sticky;top:0;background:var(--card);box-shadow:var(--shadow);z-index:10}
.brand{font-weight:700;letter-spacing:.2px}
.nav{display:flex;gap:8px;align-items:center}
.nav__link{
  padding:10px 14px;border-radius:999px;text-decoration:none;color:var(--ink);
  transition:transform .15s,background .15s
}
.nav__link:hover{background:#eef2ff;transform:translateY(-1px)}

/* =============================================================================
   4) HERO
   ========================================================================== */
.hero{padding:48px 24px}
.hero__grid{display:grid;gap:24px;grid-template-columns:1.3fr .7fr}
.hero h1{margin:.2rem 0 1rem}
.hero__card{background:var(--card);border-radius:var(--radius);padding:24px;box-shadow:var(--shadow)}

/* =============================================================================
   5) CARDS DE SERVICIOS
   ========================================================================== */
.cards{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
.card{background:var(--card);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
.hover-card{transition:transform .18s,box-shadow .18s}
.hover-card:hover{transform:translateY(-4px);box-shadow:0 16px 40px rgba(0,0,0,.08)}
.tags{display:flex;gap:8px;margin-top:10px}
.tag{background:#eef2ff;color:#3730a3;padding:4px 8px;border-radius:999px;font-size:.8rem}

/* =============================================================================
   6) FORMULARIO
   ========================================================================== */
.form__grid{grid-template-columns:repeat(2,minmax(0,1fr))}
.field{display:grid;gap:6px}
.field span{font-size:.9rem;color:var(--muted)}
.field input,.field select,.field textarea{
  width:100%;padding:12px 14px;border-radius:12px;border:1px solid #e5e7eb;background:#fff
}
.field--full{grid-column:1/-1}
select:disabled{background:#f3f4f6;color:#9ca3af;cursor:not-allowed}

/* =============================================================================
   7) CALENDARIO
   ========================================================================== */
.calendar{background:var(--card);border-radius:var(--radius);padding:12px;box-shadow:var(--shadow)}
.calendar__controls{display:flex;align-items:flex-end;gap:14px;flex-wrap:wrap}
.calendar__controls .field{min-width:260px}
.calendar__controls select{
  padding:12px 14px;border-radius:12px;border:1px solid #e5e7eb;background:#fff;
}
.calendar__grid{display:grid;gap:6px;margin-top:16px;grid-template-columns:repeat(7,minmax(0,1fr))}
.day{
  border:1px solid #eef2f7;border-radius:10px;padding:8px;background:#fff;min-height:68px;
  display:grid;grid-template-rows:auto 1fr auto;gap:6px
}
.day__num{font-weight:600;font-size:.85rem}
.slot{font-size:.72rem;padding:2px 6px;border-radius:999px;width:max-content}
.dot{display:inline-block;width:10px;height:10px;border-radius:999px;margin-right:6px;vertical-align:middle}
.dot--ok{background:var(--brand-2)} .dot--busy{background:var(--busy)} .dot--pending{background:var(--pending)}
.legend{display:flex;gap:16px;margin-top:6px}
.legend__item{font-size:.8rem;color:var(--muted)}
.day--disabled{opacity:.45;pointer-events:none;filter:grayscale(.2)}
.day--today{outline:2px solid var(--brand); box-shadow:0 0 0 4px rgba(37,99,235,.15)}
.flash{animation:flash 800ms ease-in-out 1}
@keyframes flash{
  0%{transform:scale(1); box-shadow:0 0 0 0 rgba(37,99,235,.25)}
  60%{transform:scale(1.015); box-shadow:0 0 0 8px rgba(37,99,235,.10)}
  100%{transform:scale(1); box-shadow:0 0 0 4px rgba(37,99,235,.15)}
}

/* Cabeceras de días más chicas (primer fila de la grilla) */
.calendar__grid > .day:nth-child(-n+7) strong{font-size:.85rem}

/* Tooltip nativo para detalle por día */
.day[title]{cursor:help}

/* Botón reservar mini */
.btnMini{padding:6px 10px;font-size:.82rem;border-radius:999px}

/* =============================================================================
   8) TABLAS / MODAL / FAB
   ========================================================================== */
.table-wrap{overflow:auto;margin-top:12px}
.table{width:100%;border-collapse:collapse;font-size:.95rem}
.table th,.table td{padding:10px 12px;border-bottom:1px solid #eef2f7}
.badge{padding:4px 8px;border-radius:999px;font-size:.8rem}
.badge--ok{background:#dcfce7;color:#166534}
.badge--busy{background:#fee2e2;color:#991b1b}
.badge--pending{background:#fef3c7;color:#92400e}
.icon-btn{background:transparent;border:0;font-size:1.1rem;cursor:pointer}

.modal{position:fixed;inset:0;display:none;background:rgba(0,0,0,.2);padding:20px}
.modal[aria-hidden="false"]{display:grid;place-items:center}
.modal__dialog{background:var(--card);border-radius:var(--radius);padding:18px;width:min(980px,92vw);box-shadow:var(--shadow)}

.fab{
  position:fixed;right:20px;bottom:20px;background:#25d366;color:#fff;text-decoration:none;
  width:54px;height:54px;display:grid;place-items:center;border-radius:999px;box-shadow:var(--shadow)
}

/* =============================================================================
   9) RESPONSIVE
   ========================================================================== */
@media (max-width:900px){
  .hero__grid{grid-template-columns:1fr}
  .form__grid{grid-template-columns:1fr}
}
@media (max-width:520px){
  .btn--today{padding:10px 14px}
  .btn__icon{display:none}
}

/* FAB base */
.fab{
  position:fixed; right:20px; bottom:20px;
  width:56px; height:56px; display:grid; place-items:center;
  border-radius:999px; text-decoration:none; outline:0; user-select:none;
  transition:transform .15s ease, box-shadow .15s ease, filter .15s ease;
  box-shadow:0 10px 24px rgba(0,0,0,.18), 0 2px 6px rgba(0,0,0,.08);
}
.fab:focus{outline:2px solid var(--ring); outline-offset:3px}

/* FAB WhatsApp */
.fab--wa{
  background: radial-gradient(120% 120% at 30% 20%, #5af28a 0%, #25d366 55%, #1ebe57 100%);
  color:#fff;
}
.fab--wa:hover{ transform:translateY(-2px); box-shadow:0 14px 30px rgba(0,0,0,.22) }
.fab--wa:active{ transform:translateY(0) }

/* aura/halo sutil */
.fab--wa::before{
  content:""; position:absolute; inset:-6px; border-radius:inherit;
  background:radial-gradient(closest-side, rgba(37,211,102,.25), transparent 70%);
  opacity:.0; transition:opacity .2s ease;
}
.fab--wa:hover::before{ opacity:1 }

/* icono */
.fab__icon{ width:26px; height:26px; display:block }

/* tooltip */
.fab[data-tip]::after{
  content:attr(data-tip);
  position:absolute; right:64px; bottom:50%;
  transform:translateY(50%); white-space:nowrap;
  background:#111827; color:#fff; font-size:.78rem; padding:6px 8px; border-radius:8px;
  box-shadow:0 8px 20px rgba(0,0,0,.18);
  opacity:0; pointer-events:none; transition:opacity .15s ease, transform .15s ease;
}
.fab:hover[data-tip]::after{ opacity:1; transform:translateY(50%) translateX(-2px) }

/* modo compacto opcional en móviles muy chicos */
@media (max-width:420px){
  .fab{ right:14px; bottom:14px; width:52px; height:52px }
  .fab__icon{ width:24px; height:24px }
}

/* Latido para FAB WhatsApp */
.heartbeat{
  animation: waBeat 1.8s ease-in-out infinite;
  will-change: transform, box-shadow;
}
.heartbeat:hover,
.heartbeat:focus{ animation-play-state: paused; }

@keyframes waBeat{
  0%  { transform: scale(1);   box-shadow:0 10px 24px rgba(0,0,0,.18), 0 0 0 0 rgba(37,211,102,.0); }
  30% { transform: scale(1.06);box-shadow:0 14px 30px rgba(0,0,0,.22), 0 0 0 8px rgba(37,211,102,.18); }
  45% { transform: scale(1.00);box-shadow:0 12px 26px rgba(0,0,0,.20), 0 0 0 0 rgba(37,211,102,.0); }
  65% { transform: scale(1.08);box-shadow:0 16px 34px rgba(0,0,0,.24), 0 0 0 10px rgba(37,211,102,.22); }
  100%{ transform: scale(1);   box-shadow:0 10px 24px rgba(0,0,0,.18), 0 0 0 0 rgba(37,211,102,.0); }
}

/* Respeto a usuarios con reduce motion */
@media (prefers-reduced-motion: reduce){
  .heartbeat{ animation: none; }
}


/* Filtros Admin */
.filters{ margin-top:12px; }
.filters__grid{ grid-template-columns: repeat(4,minmax(180px,1fr)); gap:14px; }
@media (max-width:900px){ .filters__grid{ grid-template-columns:1fr 1fr; } }
@media (max-width:560px){ .filters__grid{ grid-template-columns:1fr; } }
